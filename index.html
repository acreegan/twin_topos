<!DOCTYPE html>

<html>
<head>
  <title>Twin Topos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="map-container">
    <div id="map1" class="map"></div>
    <div id="map2" class="map"></div>
  </div>

  <script>
    // Initialize the two maps
    function initMaps() {
      var mapOptions = {
        center: { lat: 40.7128, lng: -74.0060 }, // Default center coordinates (New York City)
        zoom: 10, // Default zoom level
        streetViewControl: false,
        fullscreenControl: false,
      };

      var map1 = new google.maps.Map(document.getElementById('map1'), mapOptions);
      var map2 = new google.maps.Map(document.getElementById('map2'), mapOptions);

      var isZooming = false; // Add a flag to prevent recursive calls

      // Link the zoom levels of the two maps
      google.maps.event.addListener(map1, 'zoom_changed', function() {
        if (!isZooming) {
          isZooming = true;
          map2.setZoom(map1.getZoom());
          isZooming = false;
        }
      });

      google.maps.event.addListener(map2, 'zoom_changed', function() {
        if (!isZooming) {
          isZooming = true;
          map1.setZoom(map2.getZoom());
          isZooming = false;
        }
      });
    }

    // Load the Google Maps JavaScript API
    function loadMapsAPI() {
        var script = document.createElement('script');
        script.onload = initMaps;
        script.src = '/.netlify/functions/load_maps';
        script.defer = true;
        script.async = true;
        document.head.appendChild(script);
    }

    // Start loading the Maps API
    window.onload = loadMapsAPI;

  </script>
</body>
</html>

